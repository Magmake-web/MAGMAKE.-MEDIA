<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MAGMA KE. MEDIA</title>
  <link rel="icon" type="image/png" href="magma-logo.png" />

  <!-- Link to external CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- HEADER -->
  <header class="site-header">
    <div class="brand">
      <img src="magma-logo.png" alt="MAGMA KE Logo" class="logo" id="siteLogo">
      <div class="brand-text">
        <h1>MAGMA KE. MEDIA</h1>
        <div class="tag">Voice of the People</div>
      </div>
    </div>

    <nav class="main-nav">
      <a href="#news">News</a>
      <a href="#blogs">Blogs</a>
      <a href="#advertise">Advertise</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <!-- MAIN -->
  <main class="container">

    <!-- HERO -->
    <section class="hero">
      <h2>MAGMA KE. MEDIA â€” Voice of the People</h2>
      <p>Daily reports, community stories, and a platform for your voice. Follow, share, and engage.</p>
    </section>

    <div class="layout">
      <div class="content">

        <!-- DAILY NEWS -->
        <section id="news" class="card news">
          <h3>Daily News Reports</h3>
          <div id="newsContainer"></div>
          <div class="news-actions">
            <button class="btn" id="addNewsBtn">Add Sample News</button>
            <button class="btn btn-outline" id="viewAllNewsBtn">View All News</button>
          </div>
        </section>

        <!-- BLOGS - all on same page -->
        <section id="blogs" class="card blogs">
          <h3>Blogs</h3>

          <!-- Blog 1 -->
          <article id="blog-1" class="blog-entry">
            <h4>The Power of Community Journalism</h4>
            <div class="meta">Oct 7, 2025 Â· MAGMA KE. MEDIA</div>
            <img src="https://images.unsplash.com/photo-1492724441997-5dc865305da7?q=80&w=1200&auto=format&fit=crop" alt="Community Journalism">
            <p>Community journalism amplifies local voices and brings attention to issues that matter most to residents...</p>

            <div class="comments-block">
              <h5>Comments</h5>
              <div id="comments-blog-1" class="comment-list"></div>

              <div class="comment-form">
                <input id="name-blog-1" placeholder="Your name (optional)" />
                <textarea id="comment-blog-1" placeholder="Write your comment..."></textarea>
                <button class="btn" onclick="submitComment('blog-1')">Post Comment</button>
              </div>
            </div>
          </article>

          <!-- Blog 2 -->
          <article id="blog-2" class="blog-entry">
            <h4>How Local Voices Shape Policy</h4>
            <div class="meta">Oct 2, 2025 Â· MAGMA KE. MEDIA</div>
            <img src="https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?q=80&w=1200&auto=format&fit=crop" alt="Local Voices">
            <p>When citizens speak up, leaders listen. Case studies where reporting led to real changes...</p>

            <div class="comments-block">
              <h5>Comments</h5>
              <div id="comments-blog-2" class="comment-list"></div>

              <div class="comment-form">
                <input id="name-blog-2" placeholder="Your name (optional)" />
                <textarea id="comment-blog-2" placeholder="Write your comment..."></textarea>
                <button class="btn" onclick="submitComment('blog-2')">Post Comment</button>
              </div>
            </div>
          </article>

          <!-- Blog 3 -->
          <article id="blog-3" class="blog-entry">
            <h4>Spotlight: Community Clean-up Drives</h4>
            <div class="meta">Oct 6, 2025 Â· MAGMA KE. MEDIA</div>
            <p>Volunteers leading neighborhood clean-ups â€” small actions, big impact.</p>

            <div class="comments-block">
              <h5>Comments</h5>
              <div id="comments-blog-3" class="comment-list"></div>

              <div class="comment-form">
                <input id="name-blog-3" placeholder="Your name (optional)" />
                <textarea id="comment-blog-3" placeholder="Write your comment..."></textarea>
                <button class="btn" onclick="submitComment('blog-3')">Post Comment</button>
              </div>
            </div>
          </article>

        </section>
      </div>

      <!-- SIDEBAR -->
      <aside class="sidebar">
        <!-- Advertise -->
        <section id="advertise" class="card">
          <h3>Advertise With Us</h3>
          <p>Promote on MAGMA KE. MEDIA and across our social channels. Pay via M-Pesa (Send to 0748 828 970) and send proof via WhatsApp.</p>

          <table class="ad-table">
            <thead><tr><th>Package</th><th>Details</th><th>Rate</th></tr></thead>
            <tbody>
              <tr><td>Standard Post</td><td>Published in News</td><td>Ksh 1,500</td></tr>
              <tr><td>Premium Post</td><td>Homepage + Socials</td><td>Ksh 3,000</td></tr>
              <tr><td>Banner Ad</td><td>7 days on site</td><td>Ksh 2,000</td></tr>
              <tr><td>Full Package</td><td>All features</td><td>Ksh 5,000</td></tr>
            </tbody>
          </table>

          <div class="ad-actions">
            <button class="btn" onclick="payPrompt('Standard Post',1500)">Pay Ksh 1,500</button>
            <button class="btn" onclick="payPrompt('Premium Post',3000)">Pay Ksh 3,000</button>
          </div>

          <p class="muted">M-Pesa: <strong>0748 828 970</strong><br>
          After payment, send proof to WhatsApp or email: <a href="mailto:otienohillary537@gmail.com">otienohillary537@gmail.com</a></p>
        </section>

        <!-- Quick Contact -->
        <section class="card contact">
          <h3>Contact</h3>
          <p>Email: <a href="mailto:otienohillary537@gmail.com">otienohillary537@gmail.com</a></p>
          <p>Phone: <a href="tel:+254748828970">+254 748 828 970</a></p>
          <p>TikTok: <a href="https://www.tiktok.com/@magmahot006" target="_blank">magmahot006</a></p>
          <p>Facebook: <a href="https://www.facebook.com/share/1DncP71nGX/" target="_blank">Magma Updates</a></p>
          <p>Instagram: <a href="https://instagram.com/magmaupdates" target="_blank">magmaupdates</a></p>

          <a class="btn whatsapp-fixed" href="https://wa.me/254748828970?text=Hello%20MAGMA%20KE.%20MEDIA%2C%20I%20would%20like%20to%20advertise." target="_blank">ðŸ’¬ Chat on WhatsApp</a>
        </section>
      </aside>
    </div>

    <footer class="site-footer">
      Â© 2025 MAGMA KE. MEDIA Â· #DongruokMineno
    </footer>
  </main>

  <!-- Floating WhatsApp button (uses your logo) -->
  <a class="whatsapp-float" href="https://wa.me/254748828970?text=Hello%20MAGMA%20KE.%20MEDIA%2C%20I%20would%20like%20to%20advertise." target="_blank">
    <img src="magma-logo.png" alt="MAGMA Logo">
  </a>

  <!-- Link to external JS -->
  <script src="script.js"></script>
</body>
</html>
:root{
  --primary:#1E3A8A; /* navy */
  --accent:#FACC15;  /* gold */
  --bg:#F9FAFB;
  --muted:#6B7280;
  --card:#ffffff;
  --radius:12px;
  --maxw:1100px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background:var(--bg);
  color:#111827;
}

/* Header */
.site-header{
  background:linear-gradient(90deg,var(--primary), #16316b);
  color:white;
  padding:12px 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:sticky;
  top:0;
  z-index:100;
  box-shadow:0 2px 8px rgba(2,6,23,0.08);
}
.brand{display:flex;align-items:center;gap:10px}
.logo{height:52px;width:52px;object-fit:contain;border-radius:8px;background:white;padding:4px}
.brand-text h1{margin:0;font-size:1.05rem}
.brand-text .tag{font-size:12px;color:rgba(255,255,255,0.9)}

.main-nav a{color:rgba(255,255,255,0.95);text-decoration:none;margin-left:14px;font-weight:600}
.main-nav a:hover{opacity:0.9}

/* Layout */
.container{max-width:var(--maxw);margin:22px auto;padding:0 16px}
.hero{background:linear-gradient(180deg,rgba(30,58,138,0.9),rgba(30,58,138,0.75)), url('https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?q=80&w=1600&auto=format&fit=crop') center/cover no-repeat;color:white;padding:36px;border-radius:var(--radius);display:flex;align-items:center;gap:20px}
.hero h2{margin:0;font-size:1.8rem}
.layout{display:grid;grid-template-columns:1fr 340px;gap:20px;margin-top:20px}
@media(max-width:980px){.layout{grid-template-columns:1fr}}

/* Cards */
.card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
h3{margin:0 0 12px 0;color:var(--primary)}

/* News */
.news .news-item{padding:12px;border-bottom:1px solid #f1f5f9}
.news .news-item:last-child{border-bottom:none}
.news .meta{font-size:12px;color:var(--muted);margin-bottom:6px}
.readMore{color:var(--primary);font-weight:700;text-decoration:none}

/* Blogs */
.blog-entry{margin-bottom:22px;padding-bottom:12px;border-bottom:1px dashed #e6eefb}
.blog-entry img{max-width:100%;border-radius:8px;margin-top:8px}
.meta{font-size:13px;color:var(--muted);margin-bottom:8px}

/* Ads table */
.ad-table{width:100%;border-collapse:collapse;margin-top:8px}
.ad-table th, .ad-table td{padding:8px;border:1px solid #eef3ff;text-align:left}
.ad-table th{background:linear-gradient(90deg,var(--primary), #16316b);color:white}

/* Buttons */
.btn{display:inline-block;background:var(--primary);color:white;padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:700;border:none;cursor:pointer}
.btn-outline{background:white;border:2px solid var(--primary);color:var(--primary)}
.btn.gold{background:var(--accent);color:#111}

/* Comments */
.comment-list{margin-top:10px}
.comment-list .comment{border-top:1px solid #eef3ff;padding:8px 0}
.comment-form input, .comment-form textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eefb;margin-top:8px}
.comment-form textarea{min-height:80px;resize:vertical}

/* small utilities */
.muted{font-size:13px;color:var(--muted)}

/* Floating WhatsApp */
.whatsapp-float{position:fixed;right:16px;bottom:16px;width:64px;height:64px;border-radius:50%;background:#25D366;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 20px rgba(2,6,23,0.2);z-index:9999;border:4px solid rgba(255,255,255,0.65)}
.whatsapp-float img{width:44px;height:44px;border-radius:50%}

.site-footer{text-align:center;margin-top:20px;color:var(--muted);padding-bottom:40px}
// ---------- Sample news data ----------
let newsItems = [
  {id:'n1', date:'Oct 7, 2025', title:'Community health drive launched in Kondele', snippet:'Volunteers and health workers offering free screenings across the ward.'},
  {id:'n2', date:'Oct 6, 2025', title:'Local leaders call for cleaner neighborhoods', snippet:'A new initiative aims to reduce waste and create green spaces.'},
  {id:'n3', date:'Oct 5, 2025', title:'Market vendors get new trading permits', snippet:'Officials announce simplified procedures for vendor registration.'},
  {id:'n4', date:'Oct 4, 2025', title:'Students shine in regional competitions', snippet:'Kondele schools bring home awards in science and sports.'}
];

function renderNews(){
  const container = document.getElementById('newsContainer');
  container.innerHTML = '';
  newsItems.slice(0,4).forEach(item=>{
    const el = document.createElement('div');
    el.className = 'news-item';
    el.innerHTML = `<div class="meta">${item.date}</div>
                    <h4>${item.title}</h4>
                    <p style="margin:6px 0;color:var(--muted)">${item.snippet}</p>
                    <a href="#" class="readMore" onclick="expandNews('${item.id}');return false;">Read More</a>`;
    container.appendChild(el);
  });
}

function expandNews(id){
  const item = newsItems.find(n=>n.id===id);
  if(!item) return;
  alert(item.title + "\n\n" + item.snippet + "\n\n(Full article placeholder)");
}

document.getElementById && renderNews();

// allow adding sample news (for demo)
document.getElementById('addNewsBtn')?.addEventListener('click', ()=>{
  const id = 'n' + (newsItems.length + 1);
  newsItems.unshift({id, date: new Date().toLocaleDateString(), title:'New item ' + id, snippet:'Short snippet for ' + id});
  renderNews();
});

document.getElementById('viewAllNewsBtn')?.addEventListener('click', ()=>{
  window.scrollTo({top: document.getElementById('blogs').offsetTop, behavior:'smooth'});
});

// ---------- COMMENTS using localStorage ----------
function getComments(key){
  try {
    return JSON.parse(localStorage.getItem('comments_'+key)) || [];
  } catch(e){ return []; }
}
function saveComments(key, arr){
  localStorage.setItem('comments_'+key, JSON.stringify(arr));
}
function renderComments(blogId){
  const container = document.getElementById('comments-'+blogId);
  if(!container) return;
  const comments = getComments(blogId);
  container.innerHTML = '';
  if(comments.length === 0){
    container.innerHTML = '<div class="muted">No comments yet â€” be the first to comment.</div>';
    return;
  }
  comments.forEach(c=>{
    const d = document.createElement('div');
    d.className = 'comment';
    d.innerHTML = `<strong>${escapeHtml(c.name)}</strong> <span class="muted"> â€¢ ${escapeHtml(c.time)}</span>
                   <div style="margin-top:6px">${escapeHtml(c.text)}</div>`;
    container.appendChild(d);
  });
}

function submitComment(blogId){
  const nameEl = document.getElementById('name-'+blogId);
  const commentEl = document.getElementById('comment-'+blogId);
  const name = nameEl ? nameEl.value.trim() : 'Anonymous';
  const text = commentEl ? commentEl.value.trim() : '';
  if(!text){
    alert('Please write a comment before posting.');
    return;
  }
  const comments = getComments(blogId);
  comments.push({name: name || 'Anonymous', text, time: new Date().toLocaleString()});
  saveComments(blogId, comments);
  if(nameEl) nameEl.value = '';
  if(commentEl) commentEl.value = '';
  renderComments(blogId);
}

// render comments for the three sample blogs
['blog-1','blog-2','blog-3'].forEach(id => renderComments(id));

function escapeHtml(unsafe){
  return unsafe.replace(/&/g, "&amp;")
               .replace(/</g, "&lt;")
               .replace(/>/g, "&gt;")
               .replace(/"/g, "&quot;")
               .replace(/'/g, "&#039;");
}

// ---------- PAY prompt + WhatsApp ----------
function payPrompt(packageName, amount){
  const formatted = 'Ksh ' + amount.toLocaleString();
  const proceed = confirm(`You selected: ${packageName} â€” ${formatted}\n\nTo pay: open your M-Pesa and send ${formatted} to 0748 828 970.\n\nPress OK to open WhatsApp and send proof to MAGMA KE. MEDIA.`);
  if(!proceed) return;
  const msg = `Hello MAGMA KE. MEDIA, I have paid ${formatted} for: ${packageName}. Here is my proof of payment.`;
  const phone = '254748828970';
  const url = 'https://wa.me/' + phone + '?text=' + encodeURIComponent(msg);
  window.open(url, '_blank');
}

// fallback for logo load fail
document.getElementById('siteLogo')?.addEventListener('error', function(){
  this.style.display = 'none';
});
